!function(t){t(["jquery"],function(t){var i=t("body"),e=t('<div class="motice" />').appendTo(i),o=1,s={image:void 0,width:!1,position:"right-bottom",theme:"default",template:'<div class="motice-item"><div class="motice-progress"></div><button type="button" class="motice-close-button" role="button">&times;</button><div class="motice-title"></div><div class="motice-text"></div></div>',text:"I AM MOTICE",title:null,clickHide:!0,timeOut:4500,timeOutAfterHoverOut:2e3,effect:"default",effectPrefix:"motice-effect-",clShow:"motice-show",clHide:"motice-hide",progressBar:!1,closeButton:!1,onShown:function(){},onHidden:function(){},onClick:null},n="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",a={_cache:{"left-top":null,"left-bottom":null,"right-top":null,"right-bottom":null,"fluid-top":null,"fluid-bottom":null,"center-top":null,"center-bottom":null},get:function(t){var i="undefined"!=typeof this._cache[t];return t=i?t:s.position,this._cache[t]||this.getPosContainer(t)},getPosContainer:function(i){var o="motice-container motice-container-"+i,s=t("<div/>",{"class":o});return e.append(s),this._cache[i]=s,s}},c=function(t){var i=!1,e="Webkit Moz ms O".split(" "),o=document.createElement("div"),s=null;if(t=t.toLowerCase(),void 0!==o.style[t]&&(i=!0),i===!1){s=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<e.length;n++)if(void 0!==o.style[e[n]+s]){i=!0;break}}return i},l={animation:c("animation")&&c("transform")},r=function(t){this.$el=t.$el.find(".motice-progress"),this.intervalId=null,this.hideEta=null,this.maxHideTime=null,this.val=null,this.val0=null};r.prototype={reset:function(){clearTimeout(this.intervalId),this.hideEta=0,this.val0=this.val},update:function(t){this.reset(),this.maxHideTime=t,this.hideEta=(new Date).getTime()+this.maxHideTime},run:function(){function t(){var t=(i.hideEta-(new Date).getTime())/i.maxHideTime*100,e=t;i.val0&&(e=i.val0*(t/100)),i.val=e,i.$el.width(e+"%"),.5>=e&&i.reset()}var i=this;this.maxHideTime<=50||(this.intervalId=setInterval(t,50))}};var h=function(i){this.options=t.extend({},s,i||{}),this.options.clEffect=this.options.effectPrefix+this.options.effect,this.options.autoHide=this.options.timeOut>0,this._init()};h.prototype={_close:function(){this.isAnimating=!1,this.$el.remove(),this.options.onHidden.call(this)},close:function(){var t=this;if(!this.isAnimating){if(clearTimeout(this.autoHideTimer),!l.animation||!this.options.effect)return this._close();this.isAnimating=!0,this.$el.removeClass(this.options.clShow).addClass(this.options.clHide),this.$el.one(n,function(){t._close()})}},_show:function(){this.isAnimating=!1,this._autoHide(),this.options.onShown.call(this)},show:function(){var t=this;if(!this.isAnimating){if(this.$el.removeClass(this.options.clHide).addClass(this.options.clShow),!l.animation||!this.options.effect)return void this._show();this.isAnimating=!0,this.$el.one(n,function(){t._show()})}},_autoHide:function(t){var i=this.options,e=this;i.autoHide&&(clearTimeout(this.autoHideTimer),t=t||i.timeOut,this.autoHideTimer=setTimeout(function(){e.close()},t),this.progress&&(this.progress.update(t),this.progress.run()))},_init:function(){this.isAnimating=!1;var i=this.options,e=this.$el=t(i.template);e[0].id=this.id="motice-"+o++,this.theme=u.themes[i.theme],e.data("motice",this),this._parseDomBySettings(),this._initEvents(),this.show()},_parseDomBySettings:function(){var t=this.options,i=this.$container=a.get(t.position),e=this.$el;e.addClass(this.theme.classes);var o=this.$text=e.find(".motice-text");o.html(t.text),t.title?e.find(".motice-title").html(t.title):e.find(".motice-title").remove(),void 0!==t.image?e.addClass("motice-with-img").css({"background-image":"url("+t.image+")"}):null===t.image&&e.addClass("motice-without-img"),e.addClass(l.animation&&t.effect?t.clEffect:"motice-effect-null"),"top"===t.position.slice(-3)?i.prepend(e):i.append(e),t.closeButton||e.find(".motice-close-button").remove(),t.progressBar?this._initProgressBar():e.find(".motice-progress").remove(),t.width&&e.css("width",t.width)},sticky:function(){clearTimeout(this.autoHideTimer),this.progress&&this.progress.reset()},_delayHideOnHoverOut:function(){this._autoHide(this.options.timeOutAfterHoverOut)},_initEvents:function(){var t=this.options,i=this,e=this.$el;t.closeButton&&e.on("click.closeButton",function(){return i.close(),!1}),t.clickHide&&e.on("click.clickHide",function(e){return t.onClick?t.onClick.call(i,e):"A"===e.target.tagName?!0:(i.close(),!1)}),e.hover(function(){i.sticky()},function(){i._delayHideOnHoverOut()})},_initProgressBar:function(){this.progress=new r(this)}};var u=function(t){return new h(t)};return u.addTheme=function(t,i){(this.themes=this.themes||{})[t]=i,u[t]=function(t){return function(i,e){return"string"==typeof i&&(i={text:i,title:e}),i=i||{},i.theme=t,u(i)}}(t)},u.close=function(t){var i=t.data("motice");i&&i.close()},u.addTheme("default",{classes:"motice-theme-default"}),u.addTheme("info",{classes:"motice-theme-info"}),u.addTheme("warning",{classes:"motice-theme-warning"}),u.addTheme("error",{classes:"motice-theme-error"}),u.addTheme("success",{classes:"motice-theme-success"}),u})}("function"==typeof define&&define.amd?define:function(t,i){"undefined"!=typeof module&&module.exports?module.exports=i(require("jquery")):window.Motice=i(window.jQuery)});